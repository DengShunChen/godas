# This file is used to generate config.fcst, which is one of two files
# used to control the forecast job.  The other file is config.fv3.
# This file sets physics, dynamics, and I/O options.

config_fcst:
  filename: config.fcst
  FCSTEXEC: "nems_datm_mom6_cice5.x"

  content: !expand |
    #!/bin/ksh -x
    
    # This file is automatically generated from the YAML-based system
    # in ecf/ecfutils/.  Any changes will be overwritten if
    # setup_case.sh is rerun.
    
    ########## config.fcst ##########
    # Forecast specific
    
    export npe_fcst="{doc.partition_common.resources.run_fcst[0].mpi_ranks}"
    export NTHREADS_FV3="{doc.partition_common.resources.run_fcst[0].OMP_NUM_THREADS}"
    export memory_fcst="1024M"

    export FORECASTSH="$ROOT_GODAS_DIR/scripts/exglobal_fcst_nemsfv3gfs.sh"
    export FCSTEXECDIR="$ROOT_GODAS_DIR/src/DATM-MOM6-CICE5.fd/NEMS/exe/"
    export FCSTEXEC="{FCSTEXEC}"
   
    #---------------------------------------------------------------------
    
    if [[ $cpl == .true. ]] ; then # coupled model
        export DIAG_TABLE="$HOMEgfs/parm/parm_fv3diag/diag_table_cpl"
    fi
    
    echo "END: config.fcst"
